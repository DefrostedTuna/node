$(function(){var t=function(){var t=$(this).val();""===t?$(this).removeClass("has-value"):$(this).addClass("has-value")};$(".input-group input").each(t).focusout(t)}),$(function(){var t="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",e="animated bounceInDown",a="animated zoomOut fadeOut";$(".ut-modal-trigger").click(function(){var a="#"+$(this).data("ut-modal-target");$(a).addClass("ut-modal-show animated fadeIn"),$("body").addClass("ut-modal-no-scroll"),$(a).children(".ut-modal-outer").addClass(e).one(t,function(){$(a).children(".ut-modal-outer").removeClass(e),$(a).removeClass("animated fadeIn")}),$(".root-body").addClass("ut-modal-blur")}),$(".ut-modal-close").click(function(){var e="#"+$(this).data("ut-modal-target");$(e).addClass("animated fadeOut"),$(e).children(".ut-modal-outer").addClass(a).one(t,function(){$(e).children(".ut-modal-outer").removeClass(a),$(e).removeClass("ut-modal-show animated fadeOut")}),$("body").removeClass("ut-modal-no-scroll"),$(".root-body").removeClass("ut-modal-blur")})}),function(t){"use strict";t.fn.fitVids=function(e){var a={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var r=document.head||document.getElementsByTagName("head")[0],i=".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}",o=document.createElement("div");o.innerHTML='<p>x</p><style id="fit-vids-style">'+i+"</style>",r.appendChild(o.childNodes[1])}return e&&t.extend(a,e),this.each(function(){var e=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];a.customSelector&&e.push(a.customSelector);var r=".fitvidsignore";a.ignore&&(r=r+", "+a.ignore);var i=t(this).find(e.join(","));i=i.not("object object"),i=i.not(r),i.each(function(e){var a=t(this);if(!(a.parents(r).length>0||"embed"===this.tagName.toLowerCase()&&a.parent("object").length||a.parent(".fluid-width-video-wrapper").length)){a.css("height")||a.css("width")||!isNaN(a.attr("height"))&&!isNaN(a.attr("width"))||(a.attr("height",9),a.attr("width",16));var i="object"===this.tagName.toLowerCase()||a.attr("height")&&!isNaN(parseInt(a.attr("height"),10))?parseInt(a.attr("height"),10):a.height(),o=isNaN(parseInt(a.attr("width"),10))?a.width():parseInt(a.attr("width"),10),n=i/o;if(!a.attr("id")){var s="fitvid"+e;a.attr("id",s)}a.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*n+"%"),a.removeAttr("height").removeAttr("width")}})})}}(window.jQuery||window.Zepto);var LodestoneAPI={logEnabled:!1,paths:{sync:"http://xivsync.com",search:"/search/character",character:"/character/get"},init:function(){LodestoneAPI.log("init()"),"undefined"==typeof window.jQuery&&console.error("Please include https://jquery.com/, this API requires it.")},get:function(t,e,a){LodestoneAPI.log("get",t),LodestoneAPI.log("get",e),$.ajax({url:t,data:e,crossDomain:!0,dataType:"json",success:function(t){return LodestoneAPI.log("get > return",t),t.ok?a(t.data):(console.error("XIVSync API Error: "+t.msg),a(!1))},error:function(e,r,i){return console.error("Error attempting to ajax to: "+t),console.error(r),console.error(i),console.error("Please open an issue on Github: https://github.com/viion/XIVPads-LodestoneAPI"),a(!1)}})},log:function(t,e){if(LodestoneAPI.logEnabled){if(e)return void console.log("[LODESTONE-API]",t,e);console.log("[LODESTONE-API]",t)}},Search:{Character:function(t,e,a,r){if(!a||"function"!=typeof a)return void console.error("Callback function not defined.");if(!t)return console.error("Name or ID is empty"),a(!1);if($.isNumeric(t)){LodestoneAPI.log("search > character > isNumeric = true =",t);var i=LodestoneAPI.paths.sync+LodestoneAPI.paths.character,o={lodestone:t};LodestoneAPI.get(i,o,function(t){return a(0==t.length?!1:t)})}else if(!r){LodestoneAPI.log("search > character > isNumeric = false =",t);var i=LodestoneAPI.paths.sync+LodestoneAPI.paths.search,o={name:t,server:e};LodestoneAPI.get(i,o,function(r){if(0==r.length)return a(!1);for(var i in r){var o=r[i];return o.name==t&&o.world==e&&$.isNumeric(o.i),LodestoneAPI.log("search > character > recurrsion with id:",o.id),void LodestoneAPI.Search.Character(o.id,null,a,!0)}return LodestoneAPI.log("search > character > no results for: ",t),a(!1)})}}}};LodestoneAPI.init(),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof module&&"object"==typeof module.exports?require("jquery"):jQuery)}(function(t){function e(){var e=o.settings;if(e.autoDispose&&!t.contains(document.documentElement,this))return t(this).timeago("dispose"),this;var n=a(this);return isNaN(n.datetime)||(0==e.cutoff||Math.abs(i(n.datetime))<e.cutoff)&&t(this).text(r(n.datetime)),this}function a(e){if(e=t(e),!e.data("timeago")){e.data("timeago",{datetime:o.datetime(e)});var a=t.trim(e.text());o.settings.localeTitle?e.attr("title",e.data("timeago").datetime.toLocaleString()):!(a.length>0)||o.isTime(e)&&e.attr("title")||e.attr("title",a)}return e.data("timeago")}function r(t){return o.inWords(i(t))}function i(t){return(new Date).getTime()-t.getTime()}t.timeago=function(e){return r(e instanceof Date?e:"string"==typeof e?t.timeago.parse(e):"number"==typeof e?new Date(e):t.timeago.datetime(e))};var o=t.timeago;t.extend(t.timeago,{settings:{refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,autoDispose:!0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:"any moment now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(e){function a(a,i){var o=t.isFunction(a)?a(i,e):a,n=r.numbers&&r.numbers[i]||i;return o.replace(/%d/i,n)}if(!this.settings.allowPast&&!this.settings.allowFuture)throw"timeago allowPast and allowFuture settings can not both be set to false.";var r=this.settings.strings,i=r.prefixAgo,o=r.suffixAgo;if(this.settings.allowFuture&&0>e&&(i=r.prefixFromNow,o=r.suffixFromNow),!this.settings.allowPast&&e>=0)return this.settings.strings.inPast;var n=Math.abs(e)/1e3,s=n/60,d=s/60,c=d/24,l=c/365,u=45>n&&a(r.seconds,Math.round(n))||90>n&&a(r.minute,1)||45>s&&a(r.minutes,Math.round(s))||90>s&&a(r.hour,1)||24>d&&a(r.hours,Math.round(d))||42>d&&a(r.day,1)||30>c&&a(r.days,Math.round(c))||45>c&&a(r.month,1)||365>c&&a(r.months,Math.round(c/30))||1.5>l&&a(r.year,1)||a(r.years,Math.round(l)),h=r.wordSeparator||"";return void 0===r.wordSeparator&&(h=" "),t.trim([i,u,o].join(h))},parse:function(e){var a=t.trim(e);return a=a.replace(/\.\d+/,""),a=a.replace(/-/,"/").replace(/-/,"/"),a=a.replace(/T/," ").replace(/Z/," UTC"),a=a.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),a=a.replace(/([\+\-]\d\d)$/," $100"),new Date(a)},datetime:function(e){var a=o.isTime(e)?t(e).attr("datetime"):t(e).attr("title");return o.parse(a)},isTime:function(e){return"time"===t(e).get(0).tagName.toLowerCase()}});var n={init:function(){var a=t.proxy(e,this);a();var r=o.settings;r.refreshMillis>0&&(this._timeagoInterval=setInterval(a,r.refreshMillis))},update:function(a){var r=a instanceof Date?a:o.parse(a);t(this).data("timeago",{datetime:r}),o.settings.localeTitle&&t(this).attr("title",r.toLocaleString()),e.apply(this)},updateFromDOM:function(){t(this).data("timeago",{datetime:o.parse(o.isTime(this)?t(this).attr("datetime"):t(this).attr("title"))}),e.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};t.fn.timeago=function(t,e){var a=t?n[t]:n.init;if(!a)throw new Error("Unknown function name '"+t+"' for timeago");return this.each(function(){a.call(this,e)}),this},document.createElement("abbr"),document.createElement("time")}),$(function(){var t=$("#h-character-name").val()?$("#h-character-name").val():"Shinichi Sagara",e=$("#h-character-server").val()?$("#h-character-server").val():"Adamantoise";LodestoneAPI.Search.Character(t,e,function(t){t?(console.log(t),$(".character-name").append(t.name),$(".character-joblv").append("<p>Lv "+t.activeLevel+" "+t.activeJob+"</p>"),$(".character-portrait").append("<img src="+t.portrait+"/>"),$(".character-gcinfo").prepend("<h4>"+t.freeCompany+"</h4>"),$.each(t.grandCompany,function(t,e){$(".character-gcinfo").append("<p><span><img src='"+e.icon+"'/></span><span> "+e.rank+"</span></p>"),console.log(e.company+e.rank)}),$(".character-class-wrap").prepend("<h4>Classes</h4>"),$.each(t.classjobs,function(t,e){$(".character-classes").append("<div class='character-class'><p><span>"+e.level+"</span>"+e.name+"</p>")}),$(".character-minion-wrap").prepend("<h4>Minions</h4>"),$.each(t.minions,function(t,e){$(".character-minions").append("<img src='"+e.icon+"' alt='"+e.name+"'/>")}),$(".character-mount-wrap").prepend("<h4>Mounts</h4>"),$.each(t.mounts,function(t,e){$(".character-mounts").append("<img src='"+e.icon+"' alt='"+e.name+"'/>")}),$(".character-portrait img").one("load",function(){$(".lodestone-wrapper").addClass("animated bounceInRight show")})):console.log("Couldn't find it bro!")})}),$(function(){var t=$("#h-subreddit").val()?$("#h-subreddit").val():"ffxiv";$.getJSON("https://www.reddit.com/r/"+t+"/.json",function(t){$.each(t.data.children.slice(0,10),function(t,e){var a=e.data.title,r=$.timeago(new Date(1e3*e.data.created_utc)),i=$("<div/>").html(e.data.selftext_html).text();if("image"==e.data.post_hint)var o=$('<div class="article-media" />').append('<a href="'+e.data.url+'" target="_blank"><img src="'+e.data.url+'" /></a>');else if("rich:video"==e.data.post_hint)var o=$('<div class="article-media" />').append($("<div/>").html(e.data.media.oembed.html).text());else if("link"==e.data.post_hint)var o=$('<div class="article-media" />').append('<a href="'+e.data.url+'" target="_blank"><img src="'+e.data.preview.images[0].source.url+'" /></a>');else var o="";$('<div class="rss-article" />').append($('<div class="article-title" />').append($('<h4 class="article-heading">').append(a)).append($("<small>").append(r))).append($('<div class="article-body" />').append(i).append(o)).append($('<div class="article-footer" />').append('Submitted by: <a href="https://www.reddit.com/user/'+e.data.author+'" target="_blank">'+e.data.author+"</a> | ").append('<a href="https://www.reddit.com'+e.data.permalink+'" target="_blank">Link to post</a> | ').append('<a href="'+e.data.url+'" target="_blank">External link</a>')).append("<hr>").appendTo(".rss-articles-wrap")}),$(".article-body:empty").remove(),$(".article-title").click(function(){$(this).next(".article-body").slideToggle()})})}),$(function(){$(".rss-container").addClass("animated bounceInUp show"),$(".padding-wrapper iframe").addClass("animated bounceInDown show"),$(".character-class-wrap").click(function(){$(".character-classes").slideToggle("slow")}),$(".character-minion-wrap").click(function(){$(".character-minions").slideToggle("slow")}),$(".character-mount-wrap").click(function(){$(".character-mounts").slideToggle("slow")}),$(".article-video").fitVids()});